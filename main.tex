\documentclass{article}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{hyperref}
\usepackage{indentfirst}

\usepackage[top=2cm, left=2.3cm, right=2.7cm, bottom=2.5cm,a4paper]{geometry}

\begin{document}

\section{CFLs}

    \textbf{note 1}: $\Sigma=\{a,b\}$

    \textbf{note 2}: $n_x(a)$ means the number of a's in the string x.


    \begin{itemize}
        \item  $\left\{x| n_x(a)=n_x(b)\right\}$ \\ corresponding CFG : 
            \begin{align*}
                S \rightarrow aSbS | bSaS | \epsilon
            \end{align*}
        \item $\left\{x | n_x(a)\geq n_x(b)\right\}$ \\corresponding CFG:
            \begin{align*}
                S \rightarrow SS | aSb | bSa | a | \epsilon
            \end{align*}

            not surely right version : 
            \begin{align*}
                S&\rightarrow SaS | T \\
                T&\rightarrow aTbT | bTaT | \epsilon
            \end{align*}
        \item $\left\{x | n_x(a)=2n_x(b)\right\}$  \\ corresponding CFG:
            \begin{align*}
                S \rightarrow SaSaSbS | SaSbSaS | SbSaSaS | \epsilon
            \end{align*}
            using similar method, we can easily generalize this into k.\\
            important lemma needed in the proof: substring $a^xba^y,\; (x+y=k)$ can always be found in any non-empty string s in the language.
        \item complement of $a^nb^n$ \\ corresponding CFG:
            \begin{align*}
                S & \rightarrow aSb | bY | Ya \\
                Y & \rightarrow bY | aY | \epsilon
            \end{align*}
        \item $\left\{ a^ib^j | i\neq j \wedge i \neq 2j\right\}$ \\ corresponding CFG(not surely right):
            \begin{align*}
                S & \rightarrow A | B | N\\
                E & \rightarrow aEb | \epsilon\\
                A & \rightarrow Eb | aAb | Ab\\
                B & \rightarrow aaabb | aBb | aaBb \\
                M & \rightarrow aaMb | \epsilon\\
                N & \rightarrow aM | aNb | aN
            \end{align*}

        \item $\left\{ a^ib^j | i \leq j \leq 2i \right\}$ \\ 
            With the idea of previous problem, it's easy to construt a CFG to recognize this language.

            But it's also elegant to use PDA to solve this problem. 
            
            While PDF read 'a', it randomly push one 'a' or two 'a's into stack and pop two 'a's while reading 'b'.And PDA accepts while stack is empty.
            
            Using this idea, it's also easy to show $\left\{ x | n_{x}(a) \leq n_{x}(b) \leq 2n_{x}(a) \right\}$ is CFL.

        \item $\left\{xyz|x,\,z\in \Sigma^\star ,\; y\in \Sigma^\star b \Sigma^\star \; and \; |x|=|z|\geq |y|\right\}$ \\ corresponding CFG (not surely right):
            \begin{align*}
                S & \rightarrow A|B|C\\
                A & \rightarrow EEEbEE | EAE | EEAE \\ 
                B & \rightarrow EEbEEE | EBE | EBEE \\
                C & \rightarrow EbE | ECE\\
                E & \rightarrow a|b
            \end{align*}
        \item convert NFA/DFA into CFG \\
            let D = ($Q, \Sigma, \delta, q_{0}, F$) be a NFA, and WLOG, $F = \{p\}$.
            
            let C = ($V, T, R, S$) be a CFL, and
            \begin{itemize}
                \item $V$ = $Q$ 
                \item  $T$ = $\Sigma$ 
                \item $S = q_{0}$
                \item $\forall x, y \in Q, c \in \Sigma, y\in \delta(x, c)$, insert ''$x \rightarrow cy$'' into $R$ 
                \item insert ''$p \rightarrow \epsilon$'' into $R$
            \end{itemize}

            Also, one can construt D = ($V', T', R', S'$) be a CFL, and
            \begin{itemize}
                \item $V'$ = $Q'$ 
                \item  $T'$ = $\Sigma$ 
                \item $S' = p$
                \item $\forall x, y \in Q, c \in \Sigma, y\in \delta(x, c)$, insert ''$y \rightarrow xc$'' into $R'$ 
                \item insert ''$q_{0} \rightarrow \epsilon$'' into $R'$
            \end{itemize}

            Using similar idea, it's obvious that if $R$ in arbitrary CFG contains only transitions of type $A \rightarrow cB$ where $A, B \in V, c \in T^{*}$or only transitions of type $A \rightarrow Bc$, this CFG generates regular language.

            But if $R$ contains both type $A \rightarrow cB$ and type $A \rightarrow Bc$, thus this CFG might generate CFL.
            
            For example, consider this CFG
            \begin{align*}
                S & \rightarrow Bb | \epsilon \\
                B & \rightarrow aS\\
            \end{align*}
            This CFG generates CFL(hint: use pumping lemma of regular language). \\
            But I(yyx) haven't figured out whether CFGs contains only these two types transitions can generate all CFLs or not. I(yyx) guess the answer is NO.
    \end{itemize}

   
    
    
    
    

    
\end{document}